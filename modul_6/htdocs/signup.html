<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign Up · Phoning</title>

  <!-- Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css"
  />

  <!-- Font -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500&display=swap"
  />

  <!-- Material Symbols -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
  />

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="login-body">

  <!-- Simple Navbar -->
  <nav class="navbar login-navbar">
    <div class="logo-container">
      <img
        class="logo-img"
        src="https://api.builder.io/api/v1/image/assets/TEMP/88ae49d6ac3aea10d5fc2fd10a544b233d5bedc1?width=72"
        alt="Phoning Logo"
      />
      <a href="index.html" class="logo-text">Phoning</a>
    </div>
    
    <a href="index.html" class="back-btn">
      <span class="material-symbols-outlined">arrow_back</span>
      Back
    </a>
  </nav>

  <!-- Signup Section -->
  <section class="login-section">
    <div class="login-card">

      <h1 class="login-title">Create Account</h1>
      <p class="login-subtitle">
        Join Phoning and start your journey with NewJeans.
      </p>

      <form class="login-form" method="POST" action="auth-process.html" onsubmit="return validateForm()">
        <input type="hidden" name="action" value="signup" />
        
        <div class="form-group">
          <label>Username</label>
          <input name="username" id="username" type="text" placeholder="username" required />
          <small id="username-feedback" style="color: #666; font-size: 12px; margin-top: 5px; display: block;"></small>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input name="email" id="email" type="email" placeholder="example@email.com" required />
          <small id="email-feedback" style="color: #666; font-size: 12px; margin-top: 5px; display: block;"></small>
        </div>

        <div class="form-group">
          <label>Password (min. 3 characters)</label>
          <input name="password" id="password" type="password" placeholder="password" minlength="3" required />
          <small style="color: #666; font-size: 12px; margin-top: 5px; display: block;">Password must be at least 3 characters long</small>
        </div>

        <button type="submit" class="login-submit">
          Sign Up
        </button>
      </form>

      <p class="login-footer">
        Already have an account?
        <a href="login.html">Login</a>
      </p>
    </div>
  </section>

<script>
// Simulated database based on users_db.json
// Note: In production, this should be fetched from server API
const existingUsers = {
  usernames: ['722@dor.com', 'tes'],
  emails: ['722@dor.com', 'tes@mail.com']
};

function validateForm() {
  const username = document.getElementById('username').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  
  // Validasi username kosong
  if (username.trim().length < 1) {
    alert('⚠️ Username cannot be empty!');
    return false;
  }
  
  // Validasi username sudah digunakan
  if (existingUsers.usernames.includes(username.toLowerCase())) {
    alert('⚠️ Username already taken! Please choose another username.');
    return false;
  }
  
  // Validasi email format
  const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
  if (!emailPattern.test(email)) {
    alert('⚠️ Please enter a valid email address!');
    return false;
  }
  
  // Validasi email sudah terdaftar
  if (existingUsers.emails.includes(email.toLowerCase())) {
    alert('⚠️ Email already registered! Please use another email or login.');
    return false;
  }
  
  // Validasi password minimal 3 karakter
  if (password.length < 3) {
    alert('⚠️ Password must be at least 3 characters long!');
    return false;
  }
  
  return true;
}

// Real-time validation feedback
document.addEventListener('DOMContentLoaded', function() {
  const usernameInput = document.getElementById('username');
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const usernameFeedback = document.getElementById('username-feedback');
  const emailFeedback = document.getElementById('email-feedback');
  
  // Username validation
  usernameInput.addEventListener('input', function() {
    const username = this.value.trim();
    
    if (username.length === 0) {
      usernameFeedback.style.color = '#666';
      usernameFeedback.textContent = '';
    } else if (existingUsers.usernames.includes(username.toLowerCase())) {
      usernameFeedback.style.color = '#f44336';
      usernameFeedback.textContent = '✗ Username already taken';
    } else {
      usernameFeedback.style.color = '#4CAF50';
      usernameFeedback.textContent = '✓ Username available';
    }
  });
  
  // Email validation
  emailInput.addEventListener('input', function() {
    const email = this.value.trim();
    const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
    
    if (email.length === 0) {
      emailFeedback.style.color = '#666';
      emailFeedback.textContent = '';
    } else if (!emailPattern.test(email)) {
      emailFeedback.style.color = '#f44336';
      emailFeedback.textContent = '✗ Invalid email format';
    } else if (existingUsers.emails.includes(email.toLowerCase())) {
      emailFeedback.style.color = '#f44336';
      emailFeedback.textContent = '✗ Email already registered';
    } else {
      emailFeedback.style.color = '#4CAF50';
      emailFeedback.textContent = '✓ Email available';
    }
  });
  
  // Password validation
  passwordInput.addEventListener('input', function() {
    const length = this.value.length;
    const small = this.parentElement.querySelector('small');
    
    if (length === 0) {
      small.style.color = '#666';
      small.textContent = 'Password must be at least 3 characters long';
    } else if (length < 3) {
      small.style.color = '#f44336';
      small.textContent = `⚠️ ${length}/3 characters - ${3 - length} more needed`;
    } else {
      small.style.color = '#4CAF50';
      small.textContent = `✓ Password length OK (${length} characters)`;
    }
  });
});
</script>

</body>
</html>

